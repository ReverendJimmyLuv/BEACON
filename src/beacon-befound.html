<!--
-->
<!--<link rel="import" href="shared-styles.html">-->
<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/vaadin-combo-box/vaadin-combo-box.html">
<link rel="import" href="../bower_components/vaadin-text-field/vaadin-text-field.html">
<link rel="import" href="../bower_components/vaadin-text-field/vaadin-text-area.html">
<link rel="import" href="../bower_components/vaadin-radio-button/vaadin-radio-group.html">
<link rel="import" href="../bower_components/vaadin-radio-button/vaadin-radio-button.html">
<link rel="import" href="../bower_components/vaadin-date-picker/vaadin-date-picker.html">
<link rel="import" href="../bower_components/vaadin-upload/vaadin-upload.html">
<link rel="import" href="../bower_components/vaadin-progress-bar/vaadin-progress-bar.html">
<link rel="import" href="../bower_components/geo-location/geo-location.html">
<link rel="import" href="beacon-icons.html">
<link rel="import" href="../bower_components/polymerfire/polymerfire.html">
<link rel="import" href="../bower_components/polymerfire/firebase-storage-multiupload.html">
<link rel="import" href="../bower_components/polymerfire/firebase-query.html">
<link rel="import" href="../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../bower_components/iron-image/iron-image.html">
<link rel="import" href="../bower_components/vaadin-lumo-styles/icons.html">
<link rel="import" href="../bower_components/vaadin-form-layout/vaadin-form-layout.html">
<link rel="import" href="../src/befound-personal-profile.html">
<link rel="import" href="../src/befound-professional-profile.html">

<dom-module id="beacon-befound">
    <template>
        <style>
            :host {
                display: block;
                background-color: #F29737;
                padding: 10px;
                min-height: 100%;
            }

            .card {
                margin: 24px;
                padding: 16px;
                color: #757575;
                border-radius: 5px;
                background-color: #fff;
                box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
            }

            h1 {
                margin: 16px 0;
                color: #212121;
                font-size: 22px;
            }

        </style>


        <firebase-auth user="{{user}}"></firebase-auth>

        <paper-dialog opened$="[[!user]]"
                      style="background-color: #F8C945"
                      no-cancel-on-esc-key="true"
                      no-cancel-on-outside-click="true">
            <h2>You must login to</h2>
            <h2>create Beeqin</h2>
        </paper-dialog>

        <firebase-query
                id="befound"
                path="/beFoundBeacons"
                data="{{beFoundBeacons}}">
        </firebase-query>

        <!--<firebase-storage-multiupload
                id="firebaseStorage"
                path="/users/[[user.uid]]/images"
                files="{{vaadinUpload}}"
                upload-tasks="{{uploadTasks}}"
                on-error="catchError"
                force-unique>
        </firebase-storage-multiupload>-->

        <geo-location watch-pos high-accuracy latitude="{{latitude}}" longitude="{{longitude}}"></geo-location>

        <input id="latitude" value="{{latitude}}" hidden>
        <input id="longitude" value="{{longitude}}" hidden>

        <div style="position: absolute; left: 50%">
            <a href="[[rootPath]]home">
                <img src="../images/manifest/horizontal_logo.png" height="57" width="86">
            </a>
        </div>


        <div class="card">

            <h1 style="font-size:200%">Be Found/ Create Beeqin</h1>
            <h3>What would you like to be found?</h3>

            <!--Use radio buttons to identify Be Found Type-->
            <vaadin-radio-group id="coreType" value="{{coreType}}">
                <vaadin-radio-button value="Your Profile">Your Profile</vaadin-radio-button>
                <vaadin-radio-button value="Your Business or Service">Your Business or Service</vaadin-radio-button>
                <vaadin-radio-button value="Classified Ad">Classified Ad</vaadin-radio-button>
                <vaadin-radio-button value="Group Hangout">Group Hangout</vaadin-radio-button>
                <vaadin-radio-button value="Custom">Custom</vaadin-radio-button>
                <!--<vaadin-radio-button value="Garage Sale">Garage Sale</vaadin-radio-button>
                <vaadin-radio-button value="Study Group">Study Group</vaadin-radio-button>-->
            </vaadin-radio-group>

            <!--Identify Type of Profile Be Found to create-->
            <template id="yourProfile" is="dom-if" if="[[isEqual(coreType, 'Your Profile')]]">
                <hr>
                <vaadin-radio-group id="yourProfileType" value="{{yourProfileType}}">
                    <vaadin-radio-button value="Personal Profile">Personal Profile</vaadin-radio-button>
                    <vaadin-radio-button value="Professional Profile">Professional Profile</vaadin-radio-button>
                </vaadin-radio-group>

                <!--Personal Profile Fields-->
                <template is="dom-if" if="[[isEqual(yourProfileType, 'Personal Profile')]]">
                    <befound-personal-profile></befound-personal-profile>
                </template>

                <!--Professional Profile Fields-->
                <template id="proProfile" is="dom-if" if="[[isEqual(yourProfileType, 'Professional Profile')]]">
                    <befound-professional-profile></befound-professional-profile>
                </template>
            </template>

            <!--Business or Service Fields-->
            <template is="dom-if" if="[[isEqual(coreType, 'Your Business or Service')]]">
                <br>
                <vaadin-text-field label="Business or Service Name"></vaadin-text-field>
            </template>

            <!--Classified Ad Fields-->
            <template is="dom-if" if="[[isEqual(coreType, 'Classified Ad')]]">
                <br>
                <vaadin-text-field label="Classified Ad"></vaadin-text-field>
            </template>

            <!--Group Hangout Fields-->
            <template is="dom-if" if="[[isEqual(coreType, 'Group Hangout')]]">
                <br>
                <vaadin-text-field label="Group Hangout"></vaadin-text-field>
            </template>

            <!--Custom Beeqin Fields-->
            <template is="dom-if" if="[[isEqual(coreType, 'Custom')]]">
                <br>
                <vaadin-text-field label="Custom"></vaadin-text-field>
            </template>


            <!--End of main card div-->
        </div>


        <paper-dialog opened$="{{beaconCreated}}">
            <h2>Beacon Created!</h2>
        </paper-dialog>


    </template>

    <script>
        class BeaconBeFound extends Polymer.Element {
            static get is() {
                return 'beacon-befound';
            }

            static get properties() {
                return {
                    distancelist: {
                        type: Array,
                        value: ['Out 1 Mile', 'Out 5 Miles', 'Out 10 Miles', 'Out 25 Miles'],
                    },
                    timelist: {
                        type: Array,
                        value: ['Always On', 'Custom'],
                    },
                    foundDistance: {
                        type: Object,
                    },
                    foundTime: {
                        type: Object,
                    },
                    latitude: {
                        type: Number,
                    },
                    longitude: {
                        type: Number,
                    },
                    beaconCreated: {
                        type: Boolean,
                        notify: true,
                        value: false,
                    },
                    coreType: {
                        type: Object,
                        notify: true,
                    },
                    personalProfile: {
                        type: Object,
                        notify: true,
                    },
                    professionalProfile: {
                        type: Object,
                        notify: true,
                    },
                    vaadinUpload: {
                        type: Array,
                        notify: true,
                        value: [],
                    },
                    user: {
                        type: Object,
                        notify: true,
                    },

                };
            }



            isEqual(a, b) {
                return a === b;
            }



            //create beeqin and push to firebase.  need to adjust to a preview view first
            _createBeacon() {
                this.$.befound.ref.push({
                    user: this.user.uid,
                    coreType: this.$.coreType.value,
                    found2: this.$.found2.value,
                    found3: this.$.found3.value,
                    beFoundDescription: this.$.beFoundDescription.value,
                    foundDistance: this.$.foundDistance.value,
                    foundTime: this.$.foundTime.value,
                    latitude: this.$.latitude.value,
                    longitude: this.$.longitude.value
                });
                this.$.coreType.value = null;
                this.$.found2.value = null;
                this.$.found3.value = null;
                this.$.beFoundDescription.value = null;
                this.$.foundDistance.value = null;
                this.$.foundTime.value = null;
                this.beaconCreated = true;
            }

        }

        window.customElements.define(BeaconBeFound.is, BeaconBeFound);
    </script>
</dom-module>
