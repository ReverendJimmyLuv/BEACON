<!--
-->
<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/vaadin-valo-theme/vaadin-combo-box.html">
<link rel="import" href="../bower_components/vaadin-combo-box/vaadin-combo-box.html">
<!--<link rel="import" href="../src/vaadin-material-theme-master/vaadin-combo-box.html">
<link rel="import" href="../src/vaadin-material-theme-master/vaadin-text-field.html">-->
<link rel="import" href="../bower_components/vaadin-text-field/vaadin-text-field.html">
<link rel="import" href="../bower_components/vaadin-text-field/vaadin-text-area.html">
<link rel="import" href="../bower_components/vaadin-radio-button/vaadin-radio-group.html">
<link rel="import" href="../bower_components/vaadin-radio-button/vaadin-radio-button.html">
<link rel="import" href="../bower_components/vaadin-date-picker/vaadin-date-picker.html">
<link rel="import" href="../bower_components/geo-location/geo-location.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="beacon-icons.html">
<link rel="import" href="../bower_components/polymerfire/polymerfire.html">
<link rel="import" href="../bower_components/polymerfire/firebase-query.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/paper-dialog/paper-dialog.html">


<dom-module id="beacon-befound">
    <template>
        <style include="shared-styles">
            :host {
                display: block;
                background-color: #F29737;
                padding: 10px;
                height: 100%;
            }

            paper-button.orange {
                background-color: var(--paper-orange-500);
                color: white;
                --paper-button-raised-keyboard-focus: {
                    background-color: var(--paper-pink-a200) !important;
                    color: white !important;
                };
            }

            .hide {
                display: none;
            }
        </style>

        <firebase-auth user="{{user}}"></firebase-auth>

        <paper-dialog opened$="[[!user]]"
                      style="background-color: #F8C945"
                      no-cancel-on-esc-key="true"
                      no-cancel-on-outside-click="true">
            <h2>You must login to</h2>
            <h2>create Beeqin</h2>
        </paper-dialog>

        <firebase-query
                id="befound"
                path="/beFoundBeacons"
                data="{{beFoundBeacons}}">
        </firebase-query>

        <geo-location watch-pos high-accuracy latitude="{{latitude}}" longitude="{{longitude}}"></geo-location>

        <input id="latitude" value="{{latitude}}" hidden>
        <input id="longitude" value="{{longitude}}" hidden>

        <div style="position: absolute; left: 50%">
            <a href="[[rootPath]]home">
                <img src="../images/manifest/horizontal_logo.png" height="57" width="86">
            </a>
        </div>


        <div class="card">

            <h1 style="font-size:200%">Be Found/ Create Beeqin</h1>

            <vaadin-radio-group id="coreType" value="{{coreType}}" on-value-changed="_identifyCoreBeFoundType">
                <vaadin-radio-button value="Your Profile" id="coreType1">Your Profile</vaadin-radio-button>
                <vaadin-radio-button value="Your Business or Service" id="coreType2">Your Business or Service
                </vaadin-radio-button>
                <vaadin-radio-button value="Classified Ad" id="coreType3">Classified Ad</vaadin-radio-button>
                <vaadin-radio-button value="Group Hangout" id="coreType4">Group Hangout</vaadin-radio-button>
                <vaadin-radio-button value="Custom" id="coreType5">Custom</vaadin-radio-button>
                <!--<vaadin-radio-button value="Garage Sale">Garage Sale</vaadin-radio-button>
                <vaadin-radio-button value="Study Group">Study Group</vaadin-radio-button>-->
            </vaadin-radio-group>

            <!--<vaadin-combo-box
                    id="coreType"
                    label="Create Beeqin!  What would you like to be found?"
                    items="[[foundlist]]"
                    value="{{coreType}}"
                    allow-custom-value
                    style="width: 360px">
            </vaadin-combo-box>-->

            <div id="coreType1Div" class="hide">
                <vaadin-text-field style="width: 20em" label="First Name" id="firstName"></vaadin-text-field>
                <vaadin-text-field style="width: 20em" label="Last Name" id="lastName"></vaadin-text-field>
                <br>
                <vaadin-text-area style="width: 20em; min-height: 100px" label="Headline"
                                  id="headline"></vaadin-text-area>
                <br>
                <vaadin-text-field style="width: 20em" label="Education" id="education"></vaadin-text-field>
                <br>
                <vaadin-text-field style="width: 20em" label="Industry" id="industry"></vaadin-text-field>
                <br>
                <vaadin-text-area style="width: 20em; min-height: 200px" label="Summary"
                                  id="summary"></vaadin-text-area>
            </div>

            <div id="coreType2Div" class="hide">
                <vaadin-text-field label="Business or Service Name"></vaadin-text-field>
            </div>

            <div id="coreType3Div" class="hide">
                <vaadin-text-field label="Classified Ad"></vaadin-text-field>
            </div>

            <div id="coreType4Div" class="hide">
                <vaadin-text-field label="Group Hangout"></vaadin-text-field>
            </div>

            <div id="coreType5Div" class="hide">
                <vaadin-text-field label="Custom"></vaadin-text-field>
            </div>

            <!--<vaadin-combo-box
                    id="found2"
                    label="Unlock more filters"
                    items=""
                    value="{{found2}}"
                    disabled>
            </vaadin-combo-box>


            <vaadin-combo-box
                    id="found3"
                    label="Unlock more filters"
                    items=""
                    value="{{found3}}"
                    disabled>
            </vaadin-combo-box>-->

            <!--<paper-input
                    id="beFoundDescription"
                    label="Beeqin Description"
                    value="{{beFoundDescription}}"
                    char-counter maxlength="140">
            </paper-input>-->
            <br>
            <vaadin-combo-box
                    id="foundDistance"
                    label="How Far to Broadcast?"
                    items="[[distancelist]]"
                    value="{{foundDistance}}">
            </vaadin-combo-box>
            <vaadin-combo-box
                    id="foundTime"
                    label="When do you want it?"
                    items="[[timelist]]"
                    value="{{foundTime}}">
            </vaadin-combo-box>
            <br>
            <div style="position: relative">
                <paper-button raised class="custom beeqin" on-tap="_createBeacon">
                    <iron-icon icon="beacon-icons:search"></iron-icon>
                    !Create Beeqin
                </paper-button>
            </div>
        </div>

        <!--<paper-button toggles raised class="custom beeqin">
            <iron-icon icon="beacon-icons:save"></iron-icon>
            !Save Beeqin to Favorites
        </paper-button>-->


        <style is="custom-style">
            paper-button.beeqin {
                position: absolute;
                bottom: 0;
                right: 0;
                background-color: #000000;
                color: #F8C945;
            }

            paper-button.beeqin[active] {
                background-color: #F29737;
                color: #000000;
            }
        </style>

        <paper-dialog opened$="{{beaconCreated}}">
            <h2>Beacon Created!</h2>
        </paper-dialog>


    </template>

    <script>
        class BeaconBeFound extends Polymer.Element {
            static get is() {
                return 'beacon-befound';
            }

            static get properties() {
                return {
                    foundlist: {
                        type: Array,
                        value: ['Your Profile', 'Your Business or Service', 'Classified Ad', 'Group Hangout', 'Custom', 'Garage Sale', 'Study Group'],
                    },
                    distancelist: {
                        type: Array,
                        value: ['Out 1 Mile', 'Out 5 Miles', 'Out 10 Miles', 'Out 25 Miles'],
                    },
                    timelist: {
                        type: Array,
                        value: ['Always On', 'Custom'],
                    },
                    found1: {
                        type: Object,
                    },
                    found2: {
                        type: Object,
                    },
                    found3: {
                        type: Object,
                    },
                    beFoundDescription: {
                        type: String,
                    },
                    foundDistance: {
                        type: Object,
                    },
                    foundTime: {
                        type: Object,
                    },
                    latitude: {
                        type: Number,
                    },
                    longitude: {
                        type: Number,
                    },
                    beaconCreated: {
                        type: Boolean,
                        notify: true,
                        value: false,
                    },
                    coreType: {
                        type: Object,
                        notify: true,
                    },
                    coreType1: {
                        type: Object,
                        notify: true,
                    },
                    coreType2: {
                        type: Object,
                        notify: true,
                    },
                    coreType3: {
                        type: Object,
                        notify: true,
                    },
                    coreType4: {
                        type: Object,
                        notify: true,
                    },
                    coreType5: {
                        type: Object,
                        notify: true,
                    },
                    coreType1Div: {
                        type: Object,
                    },
                    coreType2Div: {
                        type: Object,
                    },
                    coreType3Div: {
                        type: Object,
                    },
                    coreType4Div: {
                        type: Object,
                    },
                    coreType5Div: {
                        type: Object,
                    },
                };
            }

            _identifyCoreBeFoundType() {
                if (this.$.coreType1.checked === false) {
                    this.$.coreType1Div.style.display = 'none';
                }
                if (this.$.coreType2.checked === false) {
                    this.$.coreType2Div.style.display = 'none';
                }
                if (this.$.coreType3.checked === false) {
                    this.$.coreType3Div.style.display = 'none';
                }
                if (this.$.coreType4.checked === false) {
                    this.$.coreType4Div.style.display = 'none';
                }
                if (this.$.coreType5.checked === false) {
                    this.$.coreType5Div.style.display = 'none';
                }
                if (this.$.coreType1.checked === true) {
                    console.log("Your Profile");
                    this.$.coreType1Div.style.display = 'block';

                } else if (this.$.coreType2.checked === true) {
                    console.log("Your Business or Service");
                    this.$.coreType2Div.style.display = 'block';

                } else if (this.$.coreType3.checked === true) {
                    console.log("Classified Ad");
                    this.$.coreType3Div.style.display = 'block';

                } else if (this.$.coreType4.checked === true) {
                    console.log("Group Hangout");
                    this.$.coreType4Div.style.display = 'block';

                } else {
                    console.log("Custom");
                    this.$.coreType5Div.style.display = 'block';

                }
            }

            _createBeacon() {
                this.$.befound.ref.push({
                    user: this.user.uid,
                    coreType: this.$.coreType.value,
                    found2: this.$.found2.value,
                    found3: this.$.found3.value,
                    beFoundDescription: this.$.beFoundDescription.value,
                    foundDistance: this.$.foundDistance.value,
                    foundTime: this.$.foundTime.value,
                    latitude: this.$.latitude.value,
                    longitude: this.$.longitude.value
                });
                this.$.coreType.value = null;
                this.$.found2.value = null;
                this.$.found3.value = null;
                this.$.beFoundDescription.value = null;
                this.$.foundDistance.value = null;
                this.$.foundTime.value = null;
                this.beaconCreated = true;
            }

        }

        window.customElements.define(BeaconBeFound.is, BeaconBeFound);
    </script>
</dom-module>
