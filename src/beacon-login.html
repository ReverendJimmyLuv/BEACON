<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/polymerfire/polymerfire.html">
<link rel="import" href="../bower_components/polymerfire/firebase-auth.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../src/login-fire-changed-paths/login-fire.html">
<link rel="import" href="../bower_components/paper-dialog/paper-dialog.html">

<dom-module id="beacon-login">
    <template>
        <style include="shared-styles">
            :host {
                display: block;
                background-color: #F29737;
                padding: 10px;
                height: 100%;
            }
        </style>

        <div style="position: absolute; left: 50%">
            <a href="[[rootPath]]home">
                <img src="../images/manifest/horizontal_logo.png" height="57" width="86">
            </a>
        </div>

        <paper-dialog opened$="[[!user]]"
                      style="background-color: #F8C945">
            <h2>You must login to</h2>
            <h2>create a Beeqin</h2>
        </paper-dialog>

        <div class="card">
            <login-fire
                    providers="google,anonymous"
                    user="{{user}}"
                    signed-in="{{SignedIn}}"
                    debug>
            </login-fire>
        </div>

        <template is="dom-if" if="[[user]]">
            <h1>Welcome [[user.displayName]]!</h1>
            <img src="[[user.photoURL]]" height="144" width="144">
        </template>

    </template>

    <script>
        class BeaconLogin extends Polymer.Element {
            static get is() {
                return 'beacon-login';
            }

            static get properties() {
                return {
                    user: {
                        type: Object,
                    },
                    statusKnown: {
                        type: Object,
                    },
                };
            }

            /* login() {
                return this.$.auth.signInWithPopup();
            }
            logout() {
                return this.$.auth.signOut();
            }

            _signOut() {
                return this.shadowRoot.querySelector('login-fire').signOut();
                // or
                // this.$$('login-fire-button').signOut();
                // or
                // this.$$('login-fire-social').signOut();
                // or
                // this.$$('login-fire-form').signOut();
            }*/
        }

        window.customElements.define(BeaconLogin.is, BeaconLogin);
    </script>
</dom-module>


